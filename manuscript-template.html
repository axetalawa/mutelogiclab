<!DOCTYPE html>
<html lang="pt" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-key="meta.title">...</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        window.MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']]
          },
          svg: {
            fontCache: 'global'
          }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script src="REPLACE-ME-WITH-CONTENT.js"></script>
    
    <style>
        /* --- GLOBAL STYLES & VARIABLES (BAHIA PALETTE) --- */
        :root {
            --dende-gold: #FFB81C;
            --deep-ocean: #00B5E2;
            --clay-tone: #C46F43;
            --dark-accent: #2C2A4A;
            --off-white: #E2E8F0;
            --light-accent: #A6FF00;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #050505; 
            color: var(--off-white);
            line-height: 1.7;
        }

        /* --- Typography --- */
        h1, h2, h3, .font-space {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            line-height: 1.3;
        }

        /* --- Header styles --- */
        header.title-header {
            text-align: center;
            margin-bottom: 2rem;
            margin-top: 4rem; /* Add margin to avoid overlap with fixed lang switcher */
        }

        header.title-header h1 {
            font-weight: 700;
            line-height: 1.2;
        }
        
        #main-title {
            display: block;
            color: var(--off-white);
            font-size: 3.75rem; /* text-6xl, 60px */
            font-weight: 700;
            font-family: 'Space Grotesk', sans-serif;
        }

        #main-subtitle {
            display: block;
            color: var(--dende-gold); 
            font-size: 1.75rem; 
            font-weight: 500; 
            font-family: 'Inter', sans-serif;
            margin-top: 0.5rem;
            line-height: 1.4;
        }

        header.title-header p {
            font-size: 1.125rem; /* text-lg */
            font-family: 'Inter', sans-serif;
            font-style: normal;
            font-weight: 400;
            color: var(--off-white);
            margin-top: 1.5rem; 
        }
        /* --- END Header styles --- */

        /* Content-specific headings */
        h2 {
            font-size: 2rem !important; 
            color: var(--deep-ocean); 
            padding-top: 4rem;
            margin-bottom: 2.5rem !important;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--dark-accent);
        }
        h3 {
            font-size: 1.5rem !important;
            color: var(--deep-ocean);
            padding-top: 3rem;
            margin-bottom: 2rem !important;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--dark-accent);
        }
        h4 {
            font-size: 1.125rem; /* text-lg */
            color: var(--dende-gold); /* Gold for sub-sub-headings */
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 600;
            padding-top: 1.5rem;
            margin-bottom: 1rem !important;
        }

        h2 .heading-number, h3 .heading-number, h4 .heading-number {
            color: #94a3b8; /* slate-400 */
            margin-right: 0.5rem; 
        }
        
        h2.abstract-title {
            color: var(--off-white);
            text-align: center;
            font-style: italic;
            font-weight: 500;
            border-bottom: none;
            padding-top: 2rem;
            font-size: 1.75rem;
        }
        
        /* Body Text */
        main p { 
            margin-bottom: 1.75rem !important;
            font-size: 1.05rem;
            color: var(--off-white);
        }
        main ul, main ol { 
            margin-left: 1.5rem;
            margin-bottom: 1.75rem !important;
        }
        li {
            margin-top: 0.75rem; 
        }
        main ul { list-style-type: disc; }
        main ol { list-style-type: decimal; }

        /* Nested lists */
        main ul ul, main ol ol, main ul ol, main ol ul {
            margin-top: 0.75rem;
            margin-bottom: 0.75rem;
        }

        a {
            color: var(--deep-ocean);
            text-decoration: none;
            font-weight: 500;
        }
        a:hover {
            text-decoration: underline;
        }

        hr {
            border: none;
            border-top: 1px solid var(--dark-accent);
            margin: 4rem 0; 
        }

        /* --- Special Elements --- */

        /* Blockquote */
        blockquote {
            margin: 2rem 0;
            margin-bottom: 2rem !important;
            padding-left: 1rem;
            border-left: 4px solid var(--clay-tone);
            color: #cbd5e1; /* slate-300 */
            font-style: italic;
            font-size: 1.1rem;
        }

        /* Code block styles */
        code { 
            background: var(--dark-accent); 
            padding: 2px 5px; 
            border-radius: 4px; 
            font-family: "Menlo", "Consolas", monospace;
            font-size: 0.9em;
            color: var(--dende-gold);
        }
        pre {
            background: rgba(0, 0, 0, 0.2); 
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid var(--dark-accent);
            overflow-x: auto;
            margin-top: 2rem; 
        }
        pre code {
            background: none;
            padding: 0;
            border-radius: 0;
            color: var(--off-white);
        }

        /* Table styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 2.5rem 0; 
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            border: 1px solid var(--dark-accent);
        }
        th, td {
            border: 1px solid var(--dark-accent);
            padding: 0.75rem;
            text-align: left;
            line-height: 1.5;
            vertical-align: top;
        }
        th {
            background-color: var(--dende-gold); 
            font-weight: 700;
            color: #050505; 
        }
        tbody tr:nth-child(even) {
            background-color: rgba(44, 42, 74, 0.15); /* light --dark-accent bg */
        }
        tbody tr:nth-child(odd) {
             background-color: rgba(0, 0, 0, 0.2); /* bg-black/20 */
        }
        
        /* MathJax spacing */
        mjx-container {
            margin: 2rem 0 !important; 
            color: var(--off-white);
        }
        p > mjx-container {
             margin: 0 !important; /* Fix for inline math */
        }
        
        /* Class for explicit math paragraphs */
        p.math-block {
            text-align: center;
        }
        p.math-block mjx-container {
             margin: 2rem 0 !important; 
        }

        /* Language Switcher */
        .lang-btn {
            transition: background-color 0.3s ease, color 0.3s ease;
            border: 1px solid var(--dark-accent);
        }
        .lang-btn.active {
            background-color: var(--deep-ocean);
            color: #050505;
            border-color: var(--deep-ocean);
        }
    </style>
</head>
<body class="antialiased">

    <div class="lang-switcher fixed top-4 right-4 z-50">
        <div class="flex items-center justify-center p-0.5 bg-black/20 rounded-md border border-purple-900/50">
            <button id="lang-pt" class="lang-btn w-auto px-3 py-1 rounded-sm text-xs font-medium" data-lang="pt">PT</button>
            <button id="lang-en" class="lang-btn w-auto px-3 py-1 rounded-sm text-xs font-medium" data-lang="en">EN</button>
        </div>
    </div>

    <main class="w-full max-w-3xl mx-auto p-8 sm:p-12 md:p-16">
        
        <header class="title-header">
            <h1>
                <span id="main-title" data-key="header.title_line1">...</span>
                <span id="main-subtitle" data-key="header.title_line2">...</span>
            </h1>
            <p data-key="header.author">...</p>
        </header>
        
        <hr>
        <h2 class="abstract-title" data-key="abstract.title">...</h2>
        <p data-key="abstract.p1">...</p>
        <p data-key="abstract.p2">...</p>
        <hr>
        <section>
            <h2 data-key="section1.title">...</h2>
            <p data-key="section1.p1">...</p>
            <p data-key="section1.p2">...</p>
            <p data-key="section1.p3">...</p>
            <p data-key="section1.p4">...</p>
        </section>

        <section>
            <h2 data-key="section2.title">...</h2>
            <p data-key="section2.p1">...</p>
            <p data-key="section2.p2">...</p>
            <p data-key="section2.p3">...</p>
            <p data-key="section2.p4">...</p>
            <p data-key="section2.p5">...</p>
            <p data-key="section2.p6">...</p>
        </section>

        <section>
            <h2 data-key="section3.title">...</h2>
            <p data-key="section3.p1">...</p>
            <p data-key="section3.p2">...</p>
            <p data-key="section3.p3">...</p>
            <p data-key="section3.p4">...</p>
            <table>
                <thead>
                    <tr>
                        <th data-key="section3.table1.h1">...</th>
                        <th data-key="section3.table1.h2">...</th>
                        <th data-key="section3.table1.h3">...</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td data-key="section3.table1.r1c0">...</td>
                        <td data-key="section3.table1.r1c1">...</td>
                        <td data-key="section3.table1.r1c2">...</td>
                    </tr>
                </tbody>
            </table>
            <p data-key="section3.p5">...</p>
        </section>

        <section>
            <h2 data-key="section4.title">...</h2>
            <p data-key="section4.p1">...</p>
            
            <h3 data-key="section4.subsection1.title">...</h3>
            <p data-key="section4.subsection1.p1">...</p>
            <p data-key="section4.subsection1.p2">...</p>

            <h3 data-key="section4.subsection2.title">...</h3>
            <p data-key="section4.subsection2.p1">...</p>
        </section>

        <section>
            <h2 data-key="section5.title">...</h2>
            <p data-key="section5.p1">...</p>
            
            <h3 data-key="section5.subsection1.title">...</h3>
            <p data-key="section5.subsection1.p1">...</p>

            <ul data-key="section5.subsection1.ul1">
              <li data-key="section5.subsection1.ul1.li0">...</li>
              <li data-key="section5.subsection1.ul1.li1">...</li>
            </ul>
        </section>
        
        <footer>
            <hr>
            <p data-key="footer.copyright" class="text-center text-sm text-slate-400">...</p>
        </footer>

    </main>

    <script>
        function setLanguage(lang) {
            // Save language choice
            localStorage.setItem('mutelogic_lang', lang);
            
            // Looks for the generic `contentData` object
            if (!window.contentData || !contentData[lang]) {
                console.error("Content data (`contentData`) not found or language not supported.");
                return;
            }
            const data = contentData[lang];

            // 1. Set simple key-value pairs
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.dataset.key;
                const keyParts = key.split('.');
                let value = data;
                
                try {
                    // Traverse the nested object
                    for (const part of keyParts) {
                        if (value === undefined) break;
                        value = value[part];
                    }

                    if (typeof value === 'string') {
                        
                        // Universal Regex for Arabic numerals (e.g., "1.", "1.1.", "2.1.1.")
                        if ((el.tagName === 'H2' || el.tagName === 'H3' || el.tagName === 'H4') && !el.classList.contains('abstract-title')) {
                            
                            const regex = /^(\d+(\.\d+)*\.)\s/; // Finds "1.", "2.1.", "3.1.1."
                            const match = value.match(regex);
                            
                            if (match) {
                                const number = match[0]; // The full number + space (e.g., "1. ")
                                const restOfText = value.substring(number.length);
                                el.innerHTML = `<span class="heading-number">${number}</span> ${restOfText}`;
                            } else {
                                el.innerHTML = value; // No number found, set as usual
                            }
                        } else {
                            el.innerHTML = value; // Not a heading or is abstract, set as usual
                        }

                    } else if (el.tagName === 'UL' || el.tagName === 'OL') {
                        // --- (From Proprioception) ---
                        // Handle list population (find direct children li)
                        Object.keys(value).forEach(liKey => {
                            // Find child <li> with the specific data-key
                            const liElement = el.querySelector(`:scope > [data-key="${key}.${liKey}"]`);
                            if (liElement) {
                                liElement.innerHTML = value[liKey];
                            }
                        });
                    } else if (el.tagName === 'TABLE') {
                        // --- (From Lattice - More Robust) ---
                        // Handle table population (more robust)
                        Object.keys(value).forEach(partKey => {
                            if (partKey.startsWith('h')) { // Header
                                const thElement = el.querySelector(`[data-key="${key}.${partKey}"]`);
                                if (thElement) thElement.innerHTML = value[partKey];
                            } else if (partKey.startsWith('r')) { // Row cells
                                // This is the nested loop that was missing
                                Object.keys(value[partKey]).forEach(cellKey => {
                                    const tdElement = el.querySelector(`[data-key="${key}.${partKey}.${cellKey}"]`);
                                    if (tdElement) tdElement.innerHTML = value[partKey][cellKey];
                                });
                            }
                        });
                    }

                } catch (e) {
                   console.warn(`Key not found or error setting key: ${key}`, e);
                }
            });

            // 2. Set active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });

            // 3. Re-typeset MathJax
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', (e) => setLanguage(e.target.dataset.lang));
            });

            const savedLang = localStorage.getItem('mutelogic_lang') || 'en'; // Default to 'en'
            setLanguage(savedLang);

            if (window.MathJax && window.MathJax.startup) {
                window.MathJax.startup.promise.then(() => {
                    MathJax.typesetPromise();
                });
            }
        });
    </script>
</body>
</html>